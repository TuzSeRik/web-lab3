<!DOCTYPE html>
<html xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      lang="ru">

<f:view>
    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title>Веб-программирование - Лабораторная №3</title>
        <link rel="stylesheet" href="../resources/css/index.css" />
        <script src="../resources/js/mainScript.js"></script>
        <script src="../resources/js/graphicScript.js"></script>
        <script src="../resources/js/validationScript.js"></script>
        <script src="../resources/js/transportScript.js"></script>
    </h:head>

    <h:body>
        <div class="container">
            <div class="content">
                <header>
                    <div class="header-text"><h2>Солодовников Дмитрий Сергеевич</h2></div>
                    <div class="header-text"><h2>Группа: P3214</h2></div>
                    <div class="header-text"><h2>Вариант: 216005</h2></div>
                </header>

                <div class="plane-n-info">
                    <div class="plane">
                        <h2 class="plane-header">Плоскость</h2>
                        <div class="quadrants">
                            <canvas class="plane-quadrant" id="alpha" width="200" height="200">Error</canvas>
                            <canvas class="plane-quadrant" id="beta" width="200" height="200">Error</canvas>
                            <canvas class="plane-quadrant" id="gamma" width="200" height="200">Error</canvas>
                            <canvas class="plane-quadrant" id="delta" width="200" height="200">Error</canvas>
                            <canvas class="plane-axis" id="axes" width="400" height="400">Error</canvas>
                        </div>
                    </div>

                    <div class="info-panel">
                        <div class="arguments">
                            <form>
                                <div class="numbers">
                                    <div class="value">
                                        <h3>X</h3>
                                        <label><p:slider id="x-visible" class="input" type="text" name="x-visible"
                                                         value="0" required="true" requiredMessage="Поле является пустым"
                                                         validatorMessage="Число вышло за ОДЗ" converterMessage="Введено не число" placeholder="от -4 до 4">
                                            <f:validateDoubleRange minimum="-5.0" maximum="3.0" />
                                            <f:ajax event="keyup" render="errX submit"/>
                                        </p:slider></label>
                                    </div>

                                    <div class="value">
                                        <h3>Y</h3>
                                        <label><p:inputText id="y-visible" class="input" type="number" name="x-visible" value="0" step="0.5" required="true" />
                                        <p class="warn" id="y-warn">Заглушка</p></label>
                                    </div>

                                    <div class="value">
                                        <h3>R</h3>
                                        <label><p:slider id="r-visible" class="input" type="text" name="x-visible" value="2" />
                                        <p class="warn" id="r-warn">Заглушка</p></label>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <div class="result">
                            <div class="table-place">
                                <h1>История запросов</h1>
                                <h:form id="table-form">
                                    <h:dataTable value="#{data.points}" id="result-table" var="p" styleClass="result-table">
                                        <h:column>
                                            <f:facet name="header">
                                                Координата X
                                            </f:facet>
                                            <h:panelGroup rendered="#{!p.edit}">
                                                #{p.x}
                                            </h:panelGroup>
                                            <p:inputText rendered="#{p.edit}" value="#{p.xEdit}" styleClass="change-input" required="true">
                                                <f:validateDoubleRange minimum="-5.0" maximum="3.0"/>
                                            </p:inputText>
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">
                                                Координата Y
                                            </f:facet>
                                            <h:panelGroup rendered="#{!p.edit}">
                                                #{p.y}
                                            </h:panelGroup>
                                            <p:inputText rendered="#{p.edit}" value="#{p.yEdit}" styleClass="change-input" required="true">
                                                <f:validateDoubleRange minimum="-5.0" maximum="5.0"/>
                                            </p:inputText>
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">
                                                Радиус
                                            </f:facet>
                                            #{p.r}
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">
                                                Попадание
                                            </f:facet>
                                            #{p.isCheck}
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">
                                                Время запроса
                                            </f:facet>
                                            #{p.date}
                                        </h:column>
                                        <h:column>
                                            <f:facet name="header">
                                                Редактирование
                                            </f:facet>
                                            <p:commandButton styleClass="submit-button" action="#{p.reverseEdit()}"
                                                             rendered="#{!p.edit}" value="Изменить" disabled="#{!p.owner.equals(name.name)}" update="table-form"/>
                                            <p:commandButton styleClass="submit-button" action="#{data.updatePoint(p)}"
                                                             rendered="#{p.edit}" value="Сохранить" disabled="#{!p.owner.equals(name.name)}" update="table-form" oncomplete="handleSubmit()"/>
                                        </h:column>
                                    </h:dataTable>
                                </h:form>
                            </div>
                        </div>

                        <input class="submit-button" id="submit" type="button" value="Проверить координаты" />
                    </div>
                </div>
            </div>
        </div>
    </h:body>
</f:view>
</html>